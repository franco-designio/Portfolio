<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Franco Aguilera | Human-Centered Designer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Fonts -->
    <link href="https://api.fontshare.com/v2/css?f[]=clash-grotesk@200,300,400,500,600,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&display=swap" rel="stylesheet">

    <style>
        /* --- CORE SETTINGS --- */
        :root {
            --orange: #FF4D00; /* International Orange */
            --dark: #050505; /* 050505 */
            --orange: #FF4D00; /* International Orange  */
            --dark: #050505; /* 050505 */
            --grid-line: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Clash Grotesk', sans-serif;
            background-color: var(--dark);
            color: #e5e5e5;
            overflow-x: hidden;
            cursor: none; /* Hide default cursor */
        }

        h1, h2, h3, .serif { font-family: 'Instrument Serif', serif; }

        /* --- CLAY/SLIME CURSOR --- */
        #custom-cursor {
            position: fixed;
            top: 0; left: 0;
            width: 20px; height: 20px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            z-index: 10000;
            mix-blend-mode: difference; /* Inverts colors */
            will-change: transform, width, height, border-radius;
            transform: translate(-50%, -50%);
            transition: width 0.3s cubic-bezier(0.19, 1, 0.22, 1), 
                        height 0.3s cubic-bezier(0.19, 1, 0.22, 1),
                        background-color 0.3s;
        }

        #custom-cursor.active {
            width: 60px;
            height: 60px;
            background: var(--orange);
            mix-blend-mode: normal; /* Optional: change blend mode on hover */
            opacity: 0.8;
        }

        /* --- SWISS GRID UTILITIES --- */
        .swiss-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            border-bottom: 1px solid var(--grid-line);
        }
        .border-r-grid { border-right: 1px solid var(--grid-line); }
        .border-l-grid { border-left: 1px solid var(--grid-line); }
        .border-t-grid { border-top: 1px solid var(--grid-line); }

        /* --- ANIMATIONS --- */
        .reveal-text {
            clip-path: inset(0 0 100% 0);
            transition: clip-path 1s cubic-bezier(0.77, 0, 0.175, 1);
        }
        .reveal-text.active { clip-path: inset(0 0 0 0); }

        /* FIX: Ensure initial visibility on page load for HERO */
        .reveal-text.immediate { 
            clip-path: inset(0 0 0 0);
            animation: revealFromBottom 1s cubic-bezier(0.77, 0, 0.175, 1);
        }

        @keyframes revealFromBottom {
            from { clip-path: inset(0 0 100% 0); }
            to { clip-path: inset(0 0 0 0); }
        }

        .reveal-img {
            clip-path: inset(0 100% 0 0);
            transition: clip-path 1.2s cubic-bezier(0.77, 0, 0.175, 1);
        }
        .reveal-img.active { clip-path: inset(0 0 0 0); }

        /* ADDED: Immediate reveal for images to prevent "stuck" invisible state on deploy */
        .reveal-img.immediate {
            clip-path: inset(0 0 0 0);
            animation: revealFromBottom 1s cubic-bezier(0.77, 0, 0.175, 1);
        }

        .marquee-container {
            overflow: hidden;
            white-space: nowrap;
        }
        .marquee-content {
            display: inline-block;
            animation: marquee 20s linear infinite;
        }
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        /* --- SCROLL CARD ANIMATIONS --- */
        .scroll-card {
            opacity: 0;
            transform: translateY(2rem);
            filter: blur(4px);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .scroll-card.is-visible {
            opacity: 1;
            transform: translateY(0);
            filter: blur(0);
        }

        /* Hide Scrollbar for Overlay */
        #overlay-scroll-container::-webkit-scrollbar {
            width: 6px;
        }
        #overlay-scroll-container::-webkit-scrollbar-track {
            background: #0a0a0a;
        }
        #overlay-scroll-container::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 10px;
        }

        /* --- NOISE OVERLAY --- */
        .noise {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 50;
            opacity: 0.05;
            background: url('https://grainy-gradients.vercel.app/noise.svg');
        }

        /* --- CANVAS (MODIFICADO: Position Absolute dentro del Header) --- */
        #bg-canvas {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0; /* Detrás del texto pero dentro del header */
            pointer-events: none;
        }

        header {
            position: relative;
            overflow: hidden; /* Corta el canvas si se sale */
        }

        /* Aseguramos que el contenido del header esté por encima del canvas */
        header .swiss-grid, header .absolute {
            position: relative;
            z-index: 10;
        }

        /* Hover image zoom for static cards */
        .img-container { overflow: hidden; cursor: none; }
        .img-container img { transition: transform 0.7s ease; }
        .img-container:hover img { transform: scale(1.05); }

        .mega-text { font-size: clamp(3rem, 8vw, 9rem); line-height: 0.9; }

        /* Utility */
        .hover-trigger { cursor: none; } 
    </style>
</head>
<body class="selection:bg-orange-600 selection:text-white">

    <!-- CLAY CURSOR -->
    <div id="custom-cursor"></div>

    <!-- PROJECT OVERLAY (NEW SCROLL LAYOUT) -->
    <div id="project-overlay" class="fixed inset-0 z-[100] bg-black/60 opacity-0 pointer-events-none transition-opacity duration-500 backdrop-blur-3xl">

        <!-- Close Button (Fixed) -->
        <button id="close-overlay" class="absolute top-8 right-8 text-white text-xl z-[120] hover:text-orange-500 transition-colors uppercase font-mono tracking-widest cursor-pointer hover-trigger mix-blend-difference bg-black/20 px-4 py-2 rounded-full border border-white/10 backdrop-blur-md">
            Close [X]
        </button>

        <!-- Scrollable Container (Transparent to let glass effect show) -->
        <div id="overlay-scroll-container" class="w-full h-full overflow-y-auto">
            <div id="overlay-content" class="max-w-7xl mx-auto px-6 py-24 min-h-screen flex flex-col gap-24 relative">
                <!-- Content will be injected here via JS -->
            </div>

            <!-- Footer spacing -->
            <div class="h-32 w-full"></div>
        </div>
    </div>

    <!-- NOISE OVERLAY -->
    <div class="noise"></div>

    <!-- NAVIGATION -->
    <nav class="fixed top-0 left-0 w-full z-40 px-6 py-6 flex justify-between items-start mix-blend-difference text-white">
        <a href="#" class="text-sm font-bold tracking-widest uppercase hover-trigger">
            /FrancoDesignio.
        </a>
        <div class="flex flex-col items-end gap-1 text-xs font-mono tracking-widest opacity-70">
            <span class="text-orange-500">OPEN TO REMOTE</span>
        </div>
    </nav>

    <!-- FLOATING MENU RIGHT -->
    <div class="fixed top-1/2 right-6 -translate-y-1/2 z-40 flex flex-col gap-4 items-end mix-blend-difference">
        <a href="#work" class="text-xs font-bold uppercase tracking-widest hover:text-orange-500 transition-colors hover-trigger">Work</a>
        <a href="#about" class="text-xs font-bold uppercase tracking-widest hover:text-orange-500 transition-colors hover-trigger">Method</a>
        <a href="#contact" class="text-xs font-bold uppercase tracking-widest hover:text-orange-500 transition-colors hover-trigger">Contact</a>
    </div>

    <!-- HERO SECTION -->
    <header class="min-h-screen flex flex-col justify-center px-4 md:px-12 relative border-b-grid">

        <!-- CANVAS BACKGROUND (MOVED INSIDE HEADER) -->
        <canvas id="bg-canvas"></canvas>

        <!-- Added pb-24 to lift content up away from bottom scroll indicator -->
        <div class="swiss-grid pb-24">
            <div class="col-span-12 md:col-span-10 md:col-start-1">
                <div class="reveal-text immediate">
                    <h1 class="mega-text font-normal text-white mb-6">
                        Designing <br>
                        <span class="serif italic text-orange-500">Intelligence</span>
                    </h1>
                </div>
            </div>
            <!-- Changed mt-8 to mt-12 for better separation -->
            <div class="col-span-12 md:col-span-6 md:col-start-1 mt-12">
                <div class="reveal-text immediate" style="animation-delay: 0.2s;">
                    <p class="text-xl md:text-2xl font-light text-neutral-400 leading-relaxed border-l border-orange-500 pl-6 hover-trigger">
                    Design engineer who likes complex problems, regulated spaces, and making sure products stay human.
                    </p>
                </div>
            </div>
        </div>

        <div class="absolute bottom-12 left-[1.5rem] md:left-[3rem] flex items-center gap-4 animate-pulse">
            <i class="fas fa-arrow-down text-orange-500"></i>
            <span class="text-xs font-mono tracking-widest uppercase text-neutral-500 pt-0.5 leading-none">
                Scroll to Explore
            </span>
        </div>
    </header>

    <!-- MARQUEE STRIP -->
    <div class="border-t-grid border-b-grid bg-orange-600 text-black py-3 overflow-hidden">
        <div class="marquee-container">
            <div class="marquee-content text-sm font-bold uppercase tracking-widest">
                Human Factors &bull; UX/UI &bull; Systems Thinking &bull; Design Engineering &bull; Ergonomic Standards &bull; Prototyping &bull; 
                Human Factors &bull; UX/UI &bull; Systems Thinking &bull; Design Engineering &bull; Ergonomic Standards &bull; Prototyping &bull;
                Human Factors &bull; UX/UI &bull; Systems Thinking &bull; Design Engineering &bull; Ergonomic Standards &bull; Prototyping &bull;
            </div>
        </div>
    </div>

    <!-- WORK SECTION -->
    <main id="work">

        <!-- PROJECT 01: CORMEUM -->
        <article class="swiss-grid md:min-h-screen items-center border-b-grid group">
            <!-- TEXT BLOCK (Standardized: Left) -->
            <div class="col-span-12 md:col-span-4 p-8 md:p-12 border-r-grid flex flex-col justify-between h-full bg-neutral-950 z-10 transition-colors duration-500 group-hover:bg-neutral-900">
                <div>
                    <span class="block text-xs font-mono text-orange-500 mb-4">01 / CASE STUDY</span>
                    <h2 class="text-5xl md:text-6xl text-white mb-4 hover-trigger project-trigger" data-project="cormeum">Cormeum <br> Tech</h2>
                    <div class="flex flex-wrap gap-2 mt-4">
                        <span class="px-2 py-1 border border-neutral-700 text-[10px] uppercase tracking-wider text-neutral-400">MedTech</span>
                        <span class="px-2 py-1 border border-neutral-700 text-[10px] uppercase tracking-wider text-neutral-400">Embedded UI</span>
                    </div>
                </div>
                <div class="mt-12 md:mt-0">
                    <p class="text-neutral-400 font-light leading-relaxed mb-6 text-sm">
                    Organ-on-chip platform for pharmaceutical testing. Uses human tissue and microfluidics to test drug interactions without animal trials.
                    </p>
                    <button class="inline-flex items-center gap-2 text-orange-500 text-sm font-bold uppercase tracking-widest hover-trigger mt-4 project-trigger" data-project="cormeum">
                        View Case <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- IMAGE BLOCK (Standardized: Right) -->
            <div class="col-span-12 md:col-span-8 h-[50vh] md:h-screen relative overflow-hidden img-container view-trigger cursor-pointer project-trigger" data-project="cormeum">
                <div class="reveal-img immediate w-full h-full">
                    <img src="img/cormeum-cover.png" 
                         alt="Cormeum Interface" 
                         loading="eager"
                         class="w-full h-full object-cover filter grayscale contrast-125 group-hover:grayscale-0 transition-all duration-700">

               <!--  STRATEGIC INSIGHT
                    <div class="absolute bottom-0 left-0 p-8 bg-black/80 backdrop-blur-md border-t border-r border-white/10 pointer-events-none">
                        <div class="text-xs font-mono text-orange-500 mb-1">STRATEGIC INSIGHT</div>
                        <p class="text-sm text-white max-w-xs">Management by exception: System remains neutral until parameters deviate.</p>
                    </div> -->

                </div>
            </div>
        </article>

        <!-- PROJECT 02:  -->
        <article class="swiss-grid md:min-h-screen items-center border-b-grid group">
            <!-- TEXT BLOCK (Standardized: Left) -->
            <!-- Fixed structure: Text first, removed 'order' classes, added border-r-grid -->
            <div class="col-span-12 md:col-span-4 p-8 md:p-12 border-r-grid flex flex-col justify-between h-full bg-neutral-950 z-10 transition-colors duration-500 group-hover:bg-neutral-900">
                <div>
                    <span class="block text-xs font-mono text-orange-500 mb-4">02 / CASE STUDY</span>
                    <h2 class="text-5xl md:text-6xl text-white mb-4 hover-trigger project-trigger" data-project="">EMSADI<br> Collective</h2>
                    <div class="flex flex-wrap gap-2 mt-4">
                        <span class="px-2 py-1 border border-neutral-700 text-[10px] uppercase tracking-wider text-neutral-400">Healthcare</span>
                        <span class="px-2 py-1 border border-neutral-700 text-[10px] uppercase tracking-wider text-neutral-400">Entrepreneurship</span>
                    </div>
                </div>
                <div class="mt-12 md:mt-0">
                    <p class="text-neutral-400 font-light leading-relaxed mb-6 text-sm">
                    Healthcare innovation collective where medics, engineers, and designers work together on medical technology projects. An initiative focused on building prototypes and teaching through hands-on collaboration.
                    </p>
                    <button class="inline-flex items-center gap-2 text-orange-500 text-sm font-bold uppercase tracking-widest hover-trigger mt-4 project-trigger" data-project="emsadi">
                        View Case <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- IMAGE BLOCK (Standardized: Right) -->
             <div class="col-span-12 md:col-span-8 h-[50vh] md:h-screen relative overflow-hidden img-container view-trigger cursor-pointer project-trigger" data-project="emsadi">
                <!-- Added 'immediate' class here -->
                <div class="reveal-img immediate w-full h-full">
                    <img src="img/emsadicoverhand.png" 
                         alt=" Network" 
                         class="w-full h-full object-cover filter grayscale contrast-125 group-hover:grayscale-0 transition-all duration-700">
                </div>
            </div>
        </article>

        <!-- PROJECT 03: DESIGN.LAB -->
        <article class="swiss-grid md:min-h-screen items-center border-b-grid group">
            <div class="col-span-12 md:col-span-4 p-8 md:p-12 border-r-grid flex flex-col justify-between h-full bg-neutral-950 z-10 transition-colors duration-500 group-hover:bg-neutral-900">
                <div>
                    <span class="block text-xs font-mono text-orange-500 mb-4">03 / EDUCATION</span>
                    <h2 class="text-5xl md:text-6xl text-white mb-4 hover-trigger project-trigger" data-project="designlab">design.lab</h2>
                    <div class="flex flex-wrap gap-2 mt-4">
                        <span class="px-2 py-1 border border-neutral-700 text-[10px] uppercase tracking-wider text-neutral-400">Design Thinking</span>
                        <span class="px-2 py-1 border border-neutral-700 text-[10px] uppercase tracking-wider text-neutral-400">Innovation</span>
                    </div>
                </div>
                <div class="mt-12 md:mt-0">
                    <p class="text-neutral-400 font-light leading-relaxed mb-6 text-sm">
                        Workshop program teaching design methods as practical skills. Focuses on turning vague creative concepts into structured workflows using real tools like Figma, Notion, and AI.
                    </p>
                    <button class="inline-flex items-center gap-2 text-orange-500 text-sm font-bold uppercase tracking-widest hover-trigger mt-4 project-trigger" data-project="designlab">
                        View Case <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            <!-- IMAGE BLOCK (Standardized: Right) -->
            <div class="col-span-12 md:col-span-8 h-[50vh] md:h-screen relative overflow-hidden img-container view-trigger cursor-pointer project-trigger" data-project="designlab">
                <!-- Added 'immediate' class here -->
                <div class="reveal-img immediate w-full h-full">
                    <img src="img/designlab-cover.png" 
                         alt="Workshop" 
                         class="w-full h-full object-cover filter grayscale contrast-125 group-hover:grayscale-0 transition-all duration-700">
                </div>
            </div>
        </article>


        <div class="swiss-grid border-none px-12 pt-16 pb-4">                 <div class="col-span-12">                     <span class="text-xs font-mono text-orange-500 uppercase tracking-widest">Other Projects</span>                 </div>             </div>             <div class="swiss-grid">
            <div class="col-span-12 md:col-span-6 border-r-grid p-12 hover:bg-white/5 transition-colors group hover-trigger">
                <i class="fas fa-hand-sparkles text-3xl text-neutral-600 mb-6 group-hover:text-orange-500 transition-colors"></i>
                <h3 class="text-2xl text-white mb-2">VR Haptic Glove</h3>
                <p class="text-sm text-neutral-500">Hardware interaction models for physical feedback in virtual environments.</p>
            </div>
            <div class="col-span-12 md:col-span-6 p-12 hover:bg-white/5 transition-colors group hover-trigger">
                <i class="fas fa-wand-magic-sparkles text-3xl text-neutral-600 mb-6 group-hover:text-orange-500 transition-colors"></i>
                <h3 class="text-2xl text-white mb-2">Creative AI</h3>
                <p class="text-sm text-neutral-500">Designing with and around AI — tools, workflows, and creative systems that actually get used.</p>
            </div>
        </div>
    </main>

     <!-- Safety Is Designed -->
    <section id="about" class="py-24 border-t-grid relative overflow-hidden">
        <div class="max-w-7xl mx-auto px-6">
            <div class="swiss-grid border-none">
                <div class="col-span-12 md:col-span-8">
                    <h2 class="mega-text text-white leading-none mb-12">
                        Safety is <br> <span class="serif italic text-neutral-600">Designed.</span>
                    </h2>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-12">
                <div class="border-t border-neutral-800 pt-6">
                    <span class="text-orange-500 text-xs font-mono mb-2 block">01</span>
                    <h4 class="text-xl text-white mb-2">Analyze</h4>
                    <p class="text-sm text-neutral-500">Heuristic Evaluation, Contextual Inquiry, Risk Analysis, Constraints & Regulation.</p>
                </div>
                <div class="border-t border-neutral-800 pt-6">
                    <span class="text-orange-500 text-xs font-mono mb-2 block">02</span>
                    <h4 class="text-xl text-white mb-2">Model</h4>
                    <p class="text-sm text-neutral-500">Information Architecture, Workflow Mapping, Cognitive Load Management.</p>
                </div>
                <div class="border-t border-neutral-800 pt-6">
                    <span class="text-orange-500 text-xs font-mono mb-2 block">03</span>
                    <h4 class="text-xl text-white mb-2">Validate</h4>
                    <p class="text-sm text-neutral-500">Usability Testing, Error Recovery Analysis, High-Fi Prototyping.</p>
                </div>
            </div>
        </div>
    </section>

    <footer id="contact" class="border-t-grid py-24 bg-orange-600 text-black">
        <div class="max-w-7xl mx-auto px-6 text-center">
            <h2 class="text-4xl md:text-8xl font-normal mb-8 serif">Let's Talk.</h2>
            <a href="mailto:designiofranco@gmail.com" class="text-lg md:text-2xl font-bold uppercase tracking-widest border-b-2 border-black pb-1 hover:text-white hover:border-white transition-colors hover-trigger">
                designiofranco@gmail.com
            </a>   
            <div class="mt-12 flex justify-center gap-8 text-xs font-mono font-bold uppercase tracking-widest">
                <span>© 2026 Franco Aguilera</span>
                <a href="https://www.linkedin.com/in/franco-aguilera/" class="hover:text-white transition-colors hover-trigger">LinkedIn</a>
                <a href="https://drive.google.com/file/d/1O21pmwRxUtMkfENGoTRcpUoPUWfpLMuX/view?usp=sharing" class="hover:text-white transition-colors hover-trigger">Resume</a>
            </div>
            <p class="mt-4 text-[6px] font-mono text-black/40 tracking-widest uppercase">
                    Franco Designio: made with Rube Goldberg machines &amp; magic. &nbsp;/&nbsp; This website: made with design and code.
                </p>
        </div>
    </footer>

    <script>
        // --- DATA ---
        const projectData = {
            cormeum: {
                title: "Cormeum Tech",
                desc: "Medical Device / Embedded UI",
                images: [
                    "img/cormeum-chip1.png",
                    "img/cormeum-chip2.png", 
                    "img/cormeum-chip3.png", 
                    "img/cormeum-chip4.png", 
                ]
            },
            emsadi: {
                title: "EMSADI Collective",
                desc: "Healthcare / Entrepreneuship",
                images: [
                    "img/emsadi-img1.png",
                    "img/emsadi-img2.png",
                    "img/emsadi-img3.png",
                ]
            },
            designlab: {
                title: "design.lab",
                desc: "Education / Innovation",
                images: [
                    "img/designlab1.png",
                    "img/designlab2.png",
                    "img/designlab3.png",
                    "img/designlab4.png",
                    "img/designlab5.png"
                ]
            }
        };

        const overlay = document.getElementById('project-overlay');
        const overlayContent = document.getElementById('overlay-content');
        const closeBtn = document.getElementById('close-overlay');
        // FIX: Grab scroll container directly
        const overlayScrollContainer = document.getElementById('overlay-scroll-container');

        // Scroll Observer for Overlay Cards
        const scrollObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                }
            });
        }, { threshold: 0.1 });

        // --- OPEN OVERLAY FUNCTION (FIXED VERSION) ---
            function openProjectOverlay(projectId) {
                const data = projectData[projectId];
                if (!data) return;

                // 1. Reset Content
                overlayContent.innerHTML = '';

                // FIX: Reset scroll position to top
                if(overlayScrollContainer) overlayScrollContainer.scrollTop = 0;

                // 2. Build Card Structure with PROJECT-SPECIFIC CONTENT
                const heroCard = `
                    <div class="scroll-card w-full max-w-4xl self-center text-center mt-12 mb-12">
                        <h2 class="text-6xl md:text-9xl serif italic text-orange-500 mb-4 leading-none">${data.title}</h2>
                        <p class="text-sm font-mono text-neutral-400 uppercase tracking-widest">${data.desc}</p>
                    </div>
                `;

                // Define project-specific content
                let textCard1, textCard2, comboCard, closingCard;

                if (projectId === 'cormeum') {
                    textCard1 = `
                        <div class="scroll-card max-w-lg self-start bg-neutral-950 p-8 md:p-12 rounded-3xl border border-white/5 shadow-2xl relative overflow-hidden group">
                            <div class="absolute top-0 left-0 w-1 h-full bg-orange-500 transform scale-y-0 group-hover:scale-y-100 transition-transform duration-500"></div>
                            <h4 class="text-xl text-white font-bold mb-4">Overview</h4>
                            <p class="text-neutral-400 leading-relaxed">
                                Designed the product interface, user experience, and visual identity for a biomedical device that mimics physiological conditions for drug testing. Transformed complex biotech behavior into clear, usable interactions for researchers and lab technicians.
                            </p>
                        </div>
                    `;
                    textCard2 = `
                        <div class="scroll-card max-w-2xl self-center text-center bg-neutral-900/50 p-12 rounded-3xl backdrop-blur-sm border border-white/5 my-12">
                            <i class="fas fa-quote-left text-4xl text-orange-500 mb-6 opacity-50"></i>
                            <p class="text-2xl text-white serif italic leading-relaxed">
                                "Design isn't just about how it looks, but how it safeguards the user against critical errors in medical environments."
                            </p>
                        </div>
                    `;
                    comboCard = `
                        <div class="scroll-card max-w-5xl w-full self-start grid md:grid-cols-2 gap-8 bg-neutral-950 p-8 rounded-3xl border border-white/5 shadow-2xl items-center">
                            <img src="img/cormeum-cover2.png" class="w-full h-full rounded-xl object-cover min-h-[300px]">
                            <div>
                               <h4 class="text-2xl text-white font-bold mb-4">Design Approach</h4>
                                <ul class="space-y-4 text-neutral-400">
                                    <li class="flex items-start gap-3"><span class="text-orange-500 mt-1">01</span> Transparent chip chambers for optical sensing—visible tissue monitoring without obstruction</li>
                                    <li class="flex items-start gap-3"><span class="text-orange-500 mt-1">02</span> Modular base design allows simultaneous testing of multiple organ models</li>
                                    <li class="flex items-start gap-3"><span class="text-orange-500 mt-1">03</span> Tubing routed to minimize tangling during chip loading and sample extraction</li>
                                </ul>
                            </div>
                        </div>
                    `;
                } else if (projectId === 'emsadi') {
                    textCard1 = `
                        <div class="scroll-card max-w-lg self-start bg-neutral-950 p-8 md:p-12 rounded-3xl border border-white/5 shadow-2xl relative overflow-hidden group">
                            <div class="absolute top-0 left-0 w-1 h-full bg-orange-500 transform scale-y-0 group-hover:scale-y-100 transition-transform duration-500"></div>
                            <h4 class="text-xl text-white font-bold mb-4">Overview</h4>
                            <p class="text-neutral-400 leading-relaxed">
                                Led design strategy for a health innovation collective focused on medical entrepreneurship. Created a cohesive visual language that aligned clinical goals with engineering specifications, generating 24+ scalable projects across multiple healthcare domains.
                            </p>
                        </div>
                    `;
                    textCard2 = `
                        <div class="scroll-card max-w-2xl self-center text-center bg-neutral-900/50 p-12 rounded-3xl backdrop-blur-sm border border-white/5 my-12">
                            <i class="fas fa-quote-left text-4xl text-orange-500 mb-6 opacity-50"></i>
                            <p class="text-2xl text-white serif italic leading-relaxed">
                                "Health systems require design that bridges clinical expertise with technical implementation."
                            </p>
                        </div>
                    `;
                    comboCard = `
                        <div class="scroll-card max-w-5xl w-full self-start grid md:grid-cols-2 gap-8 bg-neutral-950 p-8 rounded-3xl border border-white/5 shadow-2xl items-center">
                            <img src="img/emsadi-cover2.png" class="w-full h-full rounded-xl object-cover min-h-[300px]">
                            <div>
                                <h4 class="text-2xl text-white font-bold mb-4">Core Design Decisions</h4>
                                <ul class="space-y-4 text-neutral-400">
                                    <li class="flex items-start gap-3"><span class="text-orange-500 mt-1">01</span> Modular component approach—teams build independently without breaking visual coherence</li>
                                    <li class="flex items-start gap-3"><span class="text-orange-500 mt-1">02</span> Visual identity adaptable to web, mobile, and embedded devices</li>
                                    <li class="flex items-start gap-3"><span class="text-orange-500 mt-1">03</span> Design tokens for color and spacing—technical handoff without ambiguity</li>
                                </ul>
                            </div>
                        </div>
                    `;
                } else if (projectId === 'designlab') {
                    textCard1 = `
                        <div class="scroll-card max-w-lg self-start bg-neutral-950 p-8 md:p-12 rounded-3xl border border-white/5 shadow-2xl relative overflow-hidden group">
                            <div class="absolute top-0 left-0 w-1 h-full bg-orange-500 transform scale-y-0 group-hover:scale-y-100 transition-transform duration-500"></div>
                            <h4 class="text-xl text-white font-bold mb-4">Overview</h4>
                            <p class="text-neutral-400 leading-relaxed">
                                Founded an educational program teaching structured design thinking, digital collaboration workflows, and creative problem-solving. Systematized "creativity" into repeatable workflows suitable for regulated industries and professional development.
                            </p>
                        </div>
                    `;
                    textCard2 = `
                        <div class="scroll-card max-w-2xl self-center text-center bg-neutral-900/50 p-12 rounded-3xl backdrop-blur-sm border border-white/5 my-12">
                            <i class="fas fa-quote-left text-4xl text-orange-500 mb-6 opacity-50"></i>
                            <p class="text-2xl text-white serif italic leading-relaxed">
                                "Design thinking becomes powerful when it transitions from theory to systematic practice."
                            </p>
                        </div>
                    `;
                    comboCard = `
                        <div class="scroll-card max-w-5xl w-full self-start grid md:grid-cols-2 gap-8 bg-neutral-950 p-8 rounded-3xl border border-white/5 shadow-2xl items-center">
                            <img src="img/designlab-cover2.png" class="w-full h-full rounded-xl object-cover min-h-[300px]">
                            <div>
                                <h4 class="text-2xl text-white font-bold mb-4">Educational Framework</h4>
                                <ul class="space-y-4 text-neutral-400">
                                    <li class="flex items-start gap-3"><span class="text-orange-500 mt-1">01</span> Structured curriculum for design workflows</li>
                                    <li class="flex items-start gap-3"><span class="text-orange-500 mt-1">02</span> Digital tool integration (Figma, Notion, AI)</li>
                                    <li class="flex items-start gap-3"><span class="text-orange-500 mt-1">03</span> Real-world application for professionals</li>
                                </ul>
                            </div>
                        </div>
                    `;
                }

                // Image slideshow card with auto-play and dots
                const imgCard1 = `
                    <div class="scroll-card max-w-4xl w-full self-end bg-neutral-950 p-2 rounded-3xl border border-white/5 shadow-2xl">
                        <div class="relative">
                            <!-- Slideshow container -->
                            <div class="slideshow-container relative overflow-hidden rounded-2xl aspect-[16/9]">
                                ${data.images.map((img, index) => `
                                    <img src="${img}" 
                                         class="slideshow-img w-full h-full object-cover absolute top-0 left-0 opacity-0 transition-opacity duration-500 ${index === 0 ? 'opacity-90' : ''}" 
                                         data-slide="${index}">
                                `).join('')}
                            </div>
            
                                            <!-- Navigation arrows -->
                            <button class="slideshow-prev absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8 flex items-center justify-center transition-colors">
                                <i class="fas fa-chevron-left text-sm"></i>
                            </button>
                            <button class="slideshow-next absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8 flex items-center justify-center transition-colors">
                                <i class="fas fa-chevron-right text-sm"></i>
                            </button>
            
                                            <!-- Dot indicators -->
                            <div class="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2">
                                ${data.images.map((_, index) => `
                                    <button class="slideshow-dot w-2 h-2 rounded-full transition-all ${index === 0 ? 'bg-orange-500 w-6' : 'bg-white/50 hover:bg-white/75'}" 
                                            data-slide-to="${index}"></button>
                                `).join('')}
                            </div>
                        </div>
            
                                    <div class="p-4 flex justify-between items-center">
                            <span class="text-xs font-mono text-neutral-500">
                                <span class="slideshow-counter">FIG</span> UX/UI
                            </span>
                            <i class="fas fa-expand text-neutral-500"></i>
                        </div>
                    </div>
                `;

                // Common closing card
                const closingCardHTML = `
                    <div class="scroll-card max-w-3xl self-center text-center mt-24">
                        <h3 class="text-4xl md:text-6xl text-white font-bold mb-8">Got a problem worth solving?</h3>
                        <a href="mailto:designiofranco@gmail.com" class="inline-block bg-orange-600 text-black px-8 py-4 rounded-full font-bold text-lg hover:bg-white transition-colors">
                            Let's Talk
                        </a>
                    </div>
                `;

                // 3. Inject content
                overlayContent.innerHTML = heroCard + textCard1 + imgCard1 + textCard2 + comboCard + closingCardHTML;
                overlay.classList.remove('pointer-events-none', 'opacity-0');
                document.body.style.overflow = 'hidden';

                    // Initialize slideshow
                    function initSlideshow() {
                                const container = document.querySelector('.slideshow-container');
                                if (!container) return;

                                const slides = container.querySelectorAll('.slideshow-img');
                                const dots = document.querySelectorAll('.slideshow-dot');
                                const prevBtn = document.querySelector('.slideshow-prev');
                                const nextBtn = document.querySelector('.slideshow-next');
                                const counter = document.querySelector('.slideshow-counter');

                                let currentSlide = 0;
                                let autoPlayInterval;

                                function showSlide(index) {
                                                // Wrap around
                                                if (index >= slides.length) currentSlide = 0;
                                                else if (index < 0) currentSlide = slides.length - 1;
                                                else currentSlide = index;

                                                // Update images
                                                slides.forEach((slide, i) => {
                                                                    if (i === currentSlide) {
                                                                                            slide.classList.remove('opacity-0');
                                                                                            slide.classList.add('opacity-90');
                                                                                        } else {
                                                                                            slide.classList.remove('opacity-90');
                                                                                            slide.classList.add('opacity-0');
                                                                                        }
                                                                });

                                                // Update dots
                                                dots.forEach((dot, i) => {
                                                                    if (i === currentSlide) {
                                                                                            dot.classList.remove('bg-white/50', 'w-2');
                                                                                            dot.classList.add('bg-orange-500', 'w-6');
                                                                                        } else {
                                                                                            dot.classList.remove('bg-orange-500', 'w-6');
                                                                                            dot.classList.add('bg-white/50', 'w-2');
                                                                                        }
                                                                });

                                                // Update counter
                                                if (counter) {
                                                                    counter.textContent = `FIG ${String(currentSlide + 1).padStart(2, '0')}`;
                                                                }
                                            }

                                function nextSlide() {
                                                showSlide(currentSlide + 1);
                                            }

                                function prevSlide() {
                                                showSlide(currentSlide - 1);
                                            }

                                function resetAutoPlay() {
                                                clearInterval(autoPlayInterval);
                                                autoPlayInterval = setInterval(nextSlide, 7000);
                                            }

                                // Event listeners
                                prevBtn?.addEventListener('click', () => {
                                                prevSlide();
                                                resetAutoPlay();
                                            });

                                nextBtn?.addEventListener('click', () => {
                                                nextSlide();
                                                resetAutoPlay();
                                            });

                                dots.forEach((dot, index) => {
                                                dot.addEventListener('click', () => {
                                                                    showSlide(index);
                                                                    resetAutoPlay();
                                                                });
                                            });

                                // Pause on hover
                                container.addEventListener('mouseenter', () => clearInterval(autoPlayInterval));
                                container.addEventListener('mouseleave', resetAutoPlay);

                                // Start autoplay
                                autoPlayInterval = setInterval(nextSlide, 7000);
                            }

                    // Call initSlideshow
                    initSlideshow();

                // 4. Observe for scroll animations
                document.querySelectorAll('#overlay-content .scroll-card').forEach(el => {
                    scrollObserver.observe(el);
                });
            }

        function closeOverlay() {
            overlay.classList.add('pointer-events-none', 'opacity-0');
            document.body.style.overflow = '';
            setTimeout(() => {
                overlayContent.innerHTML = '';
            }, 500);
        }

        document.querySelectorAll('.project-trigger').forEach(trigger => {
            trigger.addEventListener('click', (e) => {
                const projectId = trigger.getAttribute('data-project');
                openProjectOverlay(projectId);
            });
        });

        closeBtn.addEventListener('click', closeOverlay);

        // --- CURSOR ---
        const cursor = document.getElementById('custom-cursor');
        let cMouseX = window.innerWidth / 2, cMouseY = window.innerHeight / 2;
        let cCursorX = window.innerWidth / 2, cCursorY = window.innerHeight / 2;

        document.addEventListener('mousemove', (e) => { cMouseX = e.clientX; cMouseY = e.clientY; });

        function animateCursor() {
            const distX = cMouseX - cCursorX;
            const distY = cMouseY - cCursorY;
            cCursorX += distX * 0.15;
            cCursorY += distY * 0.15;

            const vel = Math.sqrt(distX*distX + distY*distY);
            const scale = Math.min(vel * 0.005, 0.5);
            const angle = Math.atan2(distY, distX) * 180 / Math.PI;

            cursor.style.left = `${cCursorX}px`;
            cursor.style.top = `${cCursorY}px`;

            if (vel > 1) {
                cursor.style.transform = `translate(-50%, -50%) rotate(${angle}deg) scale(${1+scale}, ${1-scale})`;
                cursor.style.borderRadius = "40% 60% 40% 60% / 60% 40% 60% 40%";
            } else {
                cursor.style.transform = `translate(-50%, -50%) scale(1)`;
                cursor.style.borderRadius = "50%";
            }
            requestAnimationFrame(animateCursor);
        }
        animateCursor();

        const interactives = 'a, button, .hover-trigger, .parallax-wrapper, .view-trigger';
        document.querySelectorAll(interactives).forEach(el => {
            el.addEventListener('mouseenter', () => cursor.classList.add('active'));
            el.addEventListener('mouseleave', () => cursor.classList.remove('active'));
        });

        window.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.reveal-text.immediate').forEach(el => {
                el.classList.add('active');
            });
        });

        // --- 3D TYPOGRAPHIC NEURAL NETWORK (SPHERICAL) ---
        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        let width, height;
        let nodes = [];
        let mouse = { x: 0, y: 0 };
        let mouseScreen = { x: 0, y: 0 }; // Nueva variable para coordenadas de pantalla

        // 3D Settings MODIFIED
        const GLOBE_RADIUS = 220; // Más pequeña (antes 300)
        const FOCAL_LENGTH = 400; 

        // Rotation state
        let angleX = 0;
        let angleY = 0;

        window.addEventListener('mousemove', (e) => {
            // Normalizar coordenadas del mouse (-1 a 1) para rotación global MUY LENTA
            mouse.x = (e.clientX - width/2) * 0.000008; // Factor muy reducido
            mouse.y = (e.clientY - height/2) * 0.000008;

            // Guardar posición real para el efecto local
            mouseScreen.x = e.clientX;
            mouseScreen.y = e.clientY;
        });

        const chars = ['A', 'a', 'B', 'b', 'X', 'Y', 'Z', '0', '1', 'f', 'g', 'i', 'M', 'N'];
        const fonts = ['Instrument Serif', 'Clash Grotesk'];

        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            initNodes();
        }
        window.addEventListener('resize', resize);

        class Node3D {
            constructor() {
                // Posicionamiento esférico
                const theta = Math.random() * Math.PI * 2; // Ángulo plano
                const phi = Math.acos((Math.random() * 2) - 1); // Ángulo de elevación

                // Convertir coordenadas esféricas a cartesianas 3D
                this.x = GLOBE_RADIUS * Math.sin(phi) * Math.cos(theta);
                this.y = GLOBE_RADIUS * Math.sin(phi) * Math.sin(theta);
                this.z = GLOBE_RADIUS * Math.cos(phi);

                // Propiedades visuales
                this.char = chars[Math.floor(Math.random() * chars.length)];
                this.font = fonts[Math.floor(Math.random() * fonts.length)];
                this.fontSizeBase = Math.random() * 8 + 10; 

                // Variables para la animación
                this.currentX = 0;
                this.currentY = 0;
                this.scale = 0;
            }

            update(rotationX, rotationY) {
                // 1. Rotación en eje Y
                let y1 = this.y * Math.cos(rotationX) - this.z * Math.sin(rotationX);
                let z1 = this.z * Math.cos(rotationX) + this.y * Math.sin(rotationX);

                // 2. Rotación en eje X
                let x2 = this.x * Math.cos(rotationY) - z1 * Math.sin(rotationY);
                let z2 = z1 * Math.cos(rotationY) + this.x * Math.sin(rotationY);

                // 3. Proyección 3D a 2D
                // Factor de escala basado en la profundidad (z)
                let depth = FOCAL_LENGTH / (FOCAL_LENGTH - z2);

                this.currentX = x2 * depth + width/2;
                this.currentY = y1 * depth + height/2;
                this.scale = depth;

                // Guardamos Z transformado para opacidad
                this.depthZ = z2;

                // 4. PERTURBACIÓN LOCAL SUAVE
                // Calculamos distancia en pantalla
                let dx = this.currentX - mouseScreen.x;
                let dy = this.currentY - mouseScreen.y;
                let dist = Math.sqrt(dx*dx + dy*dy);

                // Si está cerca del mouse (< 150px)
                if (dist < 150) {
                    let force = (150 - dist) / 150;
                    // Empujamos suavemente el nodo lejos del mouse
                    this.currentX += (dx/dist) * force * 20; 
                    this.currentY += (dy/dist) * force * 20;
                }
            }

            draw() {
                // Solo dibujamos si está "delante" o no muy lejos (para evitar clipping feo)
                if (this.scale < 0) return;

                ctx.save();
                ctx.translate(this.currentX, this.currentY);
                ctx.scale(this.scale, this.scale);

                ctx.font = `${this.fontSizeBase}px "${this.font}"`;
                ctx.textAlign = "center";
                ctx.textBaseline = "middle";

                // Opacidad basada en profundidad (Fog effect)
                // Más atrás = más transparente
                let alpha = (this.scale - 0.5) * 0.3; // Ajuste fino
                if (alpha < 0) alpha = 0;
                if (alpha > 0.15) alpha = 0.15; // Límite máximo (sutil)

                ctx.fillStyle = `rgba(255, 255, 255, ${alpha})`;
                ctx.fillText(this.char, 0, 0);

                ctx.restore();
            }
        }

        function initNodes() {
            nodes = [];
            const nodeCount = 50; // Cantidad fija para la esfera
            for (let i = 0; i < nodeCount; i++) {
                nodes.push(new Node3D());
            }
        }

        function animateCanvas() {
            ctx.clearRect(0, 0, width, height);

            // Rotación automática MUY SUAVE + influencia del mouse
            angleX += 0.000003 + mouse.y; // Base speed reducida
            angleY += 0.000003 + mouse.x;

            // Primero actualizamos posiciones
            nodes.forEach(node => node.update(angleX, angleY));

            // Dibujar CONEXIONES (Líneas)
            // Solo conectamos nodos cercanos en el espacio 3D para mantener la estructura
            /* ctx.beginPath();
            for (let i = 0; i < nodes.length; i++) {
                for (let j = i + 1; j < nodes.length; j++) {
                    // Calculamos distancia real proyectada en pantalla 2D
                    // Usar distancia 2D da un efecto visual más interesante de "red" en pantalla
                    const dx = nodes[i].currentX - nodes[j].currentX;
                    const dy = nodes[i].currentY - nodes[j].currentY;
                    const dist = Math.sqrt(dx*dx + dy*dy);

                    // Umbral de conexión
                    if (dist < 120) {
                        // Opacidad basada en la profundidad media de ambos puntos
                        const avgScale = (nodes[i].scale + nodes[j].scale) / 2;
                        let alpha = (1 - dist / 120) * 0.05 * avgScale;
                        
                        if (alpha > 0) {
                            ctx.moveTo(nodes[i].currentX, nodes[i].currentY);
                            ctx.lineTo(nodes[j].currentX, nodes[j].currentY);
                            ctx.strokeStyle = `rgba(255, 255, 255, ${alpha})`;
                        }
                    }
                }
            }
            ctx.stroke(); // Dibujamos todas las líneas de una vez para rendimiento */

            // Dibujar NODOS (Letras)
            nodes.forEach(node => node.draw());

            requestAnimationFrame(animateCanvas);
        }

        // Iniciar
        resize();
        animateCanvas();

        const observerOptions = { threshold: 0.1 };
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('active'); });
        }, observerOptions);
        document.querySelectorAll('.reveal-text:not(.immediate), .reveal-img').forEach(el => observer.observe(el));
    </script>
</body>
</html>
